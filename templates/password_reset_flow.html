{% extends 'base.html' %}

{% block icerik %}
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card mt-4 shadow-sm">
        <div class="card-header bg-primary text-white text-center py-3">
          <h5 class="mb-0">
            {% if stage == 'form' %}ğŸ” Åifre SÄ±fÄ±rlama
            {% elif stage == 'confirm' %}ğŸ”‘ Yeni Parola
            {% else %}ğŸ”” Bilgi{% endif %}
          </h5>
        </div>
        <div class="card-body p-4">
          {% if stage == 'form' %}
            <p class="small text-muted">KayÄ±tlÄ± e-posta adresinizi girin; ÅŸifre sÄ±fÄ±rlama baÄŸlantÄ±sÄ± gÃ¶nderilecektir.</p>
            <form method="post">{% csrf_token %}
              <div class="mb-3">{{ form.email.label_tag }}{{ form.email }}</div>
              <button class="btn btn-primary w-100">GÃ¶nder</button>
            </form>

          {% elif stage == 'done' %}
            <div class="alert alert-success">EÄŸer e-posta kayÄ±tlarÄ±mÄ±zda mevcutsa, parola sÄ±fÄ±rlama baÄŸlantÄ±sÄ± gÃ¶nderildi. Posta kutunuzu kontrol edin.</div>
            <a href="{% url 'giris' %}" class="btn btn-secondary">GiriÅŸe DÃ¶n</a>

          {% elif stage == 'confirm' %}
            {% if validlink %}
              <form method="post">{% csrf_token %}{{ form.as_p }}<button class="btn btn-primary w-100">ParolayÄ± DeÄŸiÅŸtir</button></form>
            {% else %}
              <div class="alert alert-danger">GeÃ§ersiz veya sÃ¼resi geÃ§miÅŸ baÄŸlantÄ±.</div>
            {% endif %}

          {% elif stage == 'complete' %}
            <div class="alert alert-success">ParolanÄ±z baÅŸarÄ±yla deÄŸiÅŸtirildi. ArtÄ±k yeni parolanÄ±z ile giriÅŸ yapabilirsiniz.</div>
            <a href="{% url 'giris' %}" class="btn btn-primary">GiriÅŸ Yap</a>

          {% else %}
            <div class="alert alert-info">Ä°ÅŸlem tamamlandÄ±.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
